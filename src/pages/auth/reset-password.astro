---
import Layout from "../../layouts/Layout.astro";
import { AuthLayout } from "../../components/auth/AuthLayout";
import { AuthForm } from "../../components/auth/AuthForm";

// Pobierz token z query params
const url = new URL(Astro.request.url);
const token = url.searchParams.get("token");

// Jeśli brak tokenu, przekieruj do forgot-password
if (!token) {
  return Astro.redirect("/auth/forgot-password");
}
---

<Layout title="Reset hasła - 10xCards">
  <AuthLayout
    title="Ustaw nowe hasło"
    subtitle="Wprowadź nowe hasło dla swojego konta"
    showBackToHome={false}
    client:load
  >
    <AuthForm mode="reset-password" resetToken={token} client:load />
  </AuthLayout>
</Layout>
